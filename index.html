<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GPTA Practice Test</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 700px; margin: auto; padding: 20px; }
    h1 { text-align: center; }
    .question { margin-bottom: 30px; }
    .option { display: block; margin: 8px 0; }
    .result { font-weight: bold; margin-top: 10px; }
    button { padding: 10px 15px; margin-top: 20px; }
    .reference { color: #555; font-size: 0.9em; margin-top: 5px; }
    #score { font-size: 1.3em; text-align: center; }
  </style>
</head>
<body>
  <h1>GPTA Practice Test</h1>
  <p>Answer the 25 random questions below. Youâ€™ll see feedback after each one and your score at the end. Open-book references are shown beneath each question.</p>
  <div id="quiz"></div>
  <div id="score"></div>

  <script>
    const questionBank = [
      {
        stem: "Building sewers shall be provided with cleanouts located not more than ___ ft apart measured from the ___?",
        options: ["30 feet, cleanout fitting", "40 feet, sewer connection", "80 feet, top of the cleanout", "100 feet, top of the upstream entrance of the cleanout"],
        correct: 3,
        reference: "Section 708.3.2 GA Amendment"
      },
      {
        stem: "The T & P valve shall be installed so that it's in contact with the water within the top ___ of the tank.",
        options: ["1/6", "1/3", "6\"", "12\""],
        correct: 2,
        reference: "Section 504.4.1"
      }
      // 
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function startQuiz() {
      shuffle(questionBank);
      const quizContainer = document.getElementById("quiz");
      quizContainer.innerHTML = "";
      let score = 0;

      const selected = questionBank.slice(0, 25);
      selected.forEach((q, idx) => {
        const qDiv = document.createElement("div");
        qDiv.className = "question";
        qDiv.innerHTML = `<strong>${idx + 1}. ${q.stem}</strong>`;

        q.options.forEach((opt, i) => {
          const btn = document.createElement("button");
          btn.className = "option";
          btn.textContent = opt;
          btn.onclick = () => {
            if (i === q.correct) {
              btn.style.background = "#c8e6c9";
              qDiv.querySelectorAll("button").forEach(b => (b.disabled = true));
              score++;
            } else {
              btn.style.background = "#ffcdd2";
              qDiv.querySelectorAll("button")[q.correct].style.background = "#c8e6c9";
              qDiv.querySelectorAll("button").forEach(b => (b.disabled = true));
            }
            const ref = document.createElement("div");
            ref.className = "reference";
            ref.innerText = `Reference: ${q.reference}`;
            qDiv.appendChild(ref);
          };
          qDiv.appendChild(btn);
        });

        quizContainer.appendChild(qDiv);
      });

      const scoreDiv = document.getElementById("score");
      const showScore = document.createElement("button");
      showScore.textContent = "Show Final Score";
      showScore.onclick = () => {
        scoreDiv.innerHTML = `You scored ${score} out of 25.`;
      };
      quizContainer.appendChild(showScore);
    }

    startQuiz();
  </script>
</body>
</html>
